<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Profile Card with Interactive Background, Language Detection, and Typing Animation</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;display=swap"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Roboto Mono", monospace;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin: 0;
      overflow-x: hidden;
      background-color: #243a56;
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }
    /* Background container */
    #backgroundCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      pointer-events: none;
      background-color: #243a56;
    }
    /* Profile card */
    .profile-card {
      position: relative;
      z-index: 10;
      max-width: 320px;
      width: 100%;
      background-color: #12161f;
      border-radius: 1rem;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
      overflow: hidden;
      color: white;
      font-family: "Roboto Mono", monospace;
    }
    .profile-header {
      position: relative;
      height: 180px;
      overflow: hidden;
      border-top-left-radius: 1rem;
      border-top-right-radius: 1rem;
    }
    .profile-header img.bg-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .profile-header .actions {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .profile-header .actions a,
    .profile-header .actions button {
      width: 40px;
      height: 40px;
      background-color: rgba(36, 58, 86, 0.8);
      border-radius: 9999px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      text-decoration: none;
    }
    .profile-header .actions a:hover,
    .profile-header .actions button:hover {
      background-color: rgba(36, 58, 86, 0.95);
    }
    .profile-avatar {
      position: absolute;
      bottom: -48px;
      left: 50%;
      transform: translateX(-50%);
      width: 96px;
      height: 96px;
      border: 4px solid #243a56;
      border-radius: 9999px;
      overflow: hidden;
      background-color: #12161f;
    }
    .profile-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .profile-content {
      padding: 64px 1.5rem 2rem;
      text-align: center;
    }
    .profile-content h2 {
      font-weight: 800;
      font-size: 1.25rem;
      margin: 0;
      letter-spacing: 0.05em;
    }
    .profile-content p.handle {
      margin-top: 0.25rem;
      font-weight: 400;
      font-family: "Roboto", sans-serif;
      font-size: 1rem;
    }
    .profile-buttons {
      margin-top: 1.5rem;
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .profile-buttons button {
      background-color: #2a3a7a;
      border: none;
      border-radius: 9999px;
      color: white;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: background-color 0.3s ease;
    }
    .profile-buttons button:hover {
      background-color: #3b4a9a;
    }
    .profile-buttons i {
      font-size: 0.8rem;
    }
    .code-typing {
      margin-top: 2rem;
      font-family: "Roboto Mono", monospace;
      font-size: 0.75rem;
      color: #7f8c8d;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #7f8c8d;
      width: max-content;
      margin-left: auto;
      margin-right: auto;
      min-height: 1.25rem;
    }
    .typing-variable {
      color: #2a3a7a;
    }
    .typing-value {
      color: #d35400;
    }
    /* Settings button bottom-left */
    #settingsBtn {
      position: fixed;
      bottom: 1rem;
      left: 1rem;
      z-index: 20;
      background-color: #2a3a7a;
      color: white;
      width: 44px;
      height: 44px;
      border-radius: 9999px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 0 10px rgb(250 204 21 / 0.7);
      transition: background-color 0.3s ease;
      border: none;
    }
    #settingsBtn:hover {
      background-color: #3b4a9a;
    }
    /* Settings panel */
    #settingsPanel {
      position: fixed;
      bottom: 60px;
      left: 1rem;
      width: 280px;
      max-width: 90vw;
      background-color: #12161f;
      border-radius: 0.75rem;
      box-shadow: 0 0 15px rgb(250 204 21 / 0.7);
      padding: 1rem 1.5rem;
      color: white;
      font-family: "Roboto Mono", monospace;
      font-size: 0.875rem;
      z-index: 20;
      display: none;
      flex-direction: column;
      gap: 1rem;
    }
    #settingsPanel.show {
      display: flex;
    }
    #settingsPanel h3 {
      font-weight: 700;
      font-size: 1.125rem;
      margin-bottom: 0.5rem;
      border-bottom: 1px solid #2a3a7a;
      padding-bottom: 0.25rem;
    }
    #settingsPanel .section {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    #settingsPanel .section label {
      font-weight: 600;
    }
    #settingsPanel .btn-group {
      display: flex;
      gap: 0.5rem;
    }
    #settingsPanel .btn-group button {
      flex: 1;
      padding: 0.4rem 0;
      background-color: #2a3a7a;
      border: none;
      border-radius: 0.375rem;
      color: white;
      font-family: "Roboto Mono", monospace;
      font-size: 0.875rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #settingsPanel .btn-group button:hover,
    #settingsPanel .btn-group button:focus {
      background-color: #3b4a9a;
      outline: none;
    }
    #settingsPanel button.logout {
      background-color: #dc2626;
      padding: 0.5rem;
      border-radius: 0.375rem;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    #settingsPanel button.logout:hover,
    #settingsPanel button.logout:focus {
      background-color: #b91c1c;
      outline: none;
    }
    /* Dark theme */
    body.dark {
      background-color: #12161f;
      color: #cbd5e1;
    }
    body.dark .code-typing {
      color: #94a3b8;
      border-right-color: #94a3b8;
    }
    body.dark .typing-variable {
      color: #1e40af;
    }
    body.dark .typing-value {
      color: #ea580c;
    }
    body.dark #settingsBtn {
      background-color: #1e293b;
      box-shadow: 0 0 10px rgb(250 204 21 / 0.7);
    }
    body.dark #settingsBtn:hover {
      background-color: #334155;
    }
    body.dark #settingsPanel {
      background-color: #1e293b;
      box-shadow: 0 0 15px rgb(250 204 21 / 0.7);
      color: #cbd5e1;
    }
    body.dark #settingsPanel .btn-group button {
      background-color: #334155;
      color: #cbd5e1;
    }
    body.dark #settingsPanel .btn-group button:hover,
    body.dark #settingsPanel .btn-group button:focus {
      background-color: #475569;
    }
    body.dark #settingsPanel button.logout {
      background-color: #b91c1c;
    }
    body.dark #settingsPanel button.logout:hover,
    body.dark #settingsPanel button.logout:focus {
      background-color: #7f1d1d;
    }
  </style>
</head>
<body>
  <canvas id="backgroundCanvas"></canvas>

  <div class="profile-card" role="main" aria-label="User profile card">
    <div class="profile-header">
      <img
        src="https://storage.googleapis.com/a1aa/image/6390a342-c59a-4930-a6a6-cbcdb0acad7b.jpg"
        alt="Desk with laptop, books, and a shadowed wall background"
        class="bg-img"
        width="400"
        height="180"
      />
      <div class="actions">
        <a
          href="https://t.me/yTrickz"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Telegram link"
          title="Telegram"
          ><i class="fab fa-telegram-plane"></i
        ></a>
        <button aria-label="Visit website" title="Visit website">
          <i class="fas fa-globe"></i>
        </button>
      </div>
      <div class="profile-avatar" aria-label="User avatar">
        <img
          src="https://storage.googleapis.com/a1aa/image/8cf9d279-9c02-4238-e371-a1c4d471405f.jpg"
          alt="Close-up of a cat sitting on a laptop keyboard"
          width="96"
          height="96"
        />
      </div>
    </div>
    <div class="profile-content">
      <h2 id="name">MINOTBUG</h2>
      <p class="handle" id="handle">@MinosTbug</p>
      <div class="profile-buttons" id="buttons" role="group" aria-label="Profile action buttons">
        <button><i class="fas fa-info-circle"></i> Info</button>
        <button><i class="fas fa-code"></i> Habilidades</button>
        <button><i class="fas fa-briefcase"></i> Teams</button>
      </div>
      <div
        class="code-typing"
        id="typingCode"
        role="textbox"
        aria-live="polite"
        aria-atomic="true"
      ></div>
    </div>
  </div>

  <button id="settingsBtn" aria-label="Open settings" title="Settings">
    <i class="fas fa-cog fa-lg"></i>
  </button>

  <aside
    id="settingsPanel"
    role="dialog"
    aria-modal="true"
    aria-labelledby="settingsTitle"
    tabindex="-1"
  >
    <h3 id="settingsTitle">Settings</h3>

    <div class="section" id="accountSection">
      <label>Account</label>
      <div class="btn-group">
        <button type="button" id="registerBtn">Register</button>
        <button type="button" id="loginBtn">Login</button>
      </div>
    </div>

    <div class="section" id="themeSection">
      <label>Theme</label>
      <div class="btn-group">
        <button type="button" id="lightThemeBtn">Light</button>
        <button type="button" id="darkThemeBtn">Dark</button>
      </div>
    </div>

    <div class="section" id="logoutSection">
      <button type="button" id="logoutBtn" class="logout">Log Out</button>
    </div>
  </aside>

  <script>
    // Canvas background with many lines that move away from mouse pointer smoothly
    const canvas = document.getElementById("backgroundCanvas");
    const ctx = canvas.getContext("2d");
    let width, height;
    let lines = [];
    const lineCount = 60;
    const maxLineLength = 120;
    const maxMoveDistance = 150;
    const moveSpeed = 0.1;

    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    }
    window.addEventListener("resize", resize);
    resize();

    class Line {
      constructor(x1, y1, x2, y2) {
        this.x1 = x1;
        this.y1 = y1;
        this.x2 = x2;
        this.y2 = y2;
        this.origX1 = x1;
        this.origY1 = y1;
        this.origX2 = x2;
        this.origY2 = y2;
        this.offsetX1 = 0;
        this.offsetY1 = 0;
        this.offsetX2 = 0;
        this.offsetY2 = 0;
      }
      update(mouseX, mouseY) {
        // Calculate distance from mouse to line midpoint
        const midX = (this.origX1 + this.origX2) / 2;
        const midY = (this.origY1 + this.origY2) / 2;
        const dx = midX - mouseX;
        const dy = midY - mouseY;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < maxMoveDistance) {
          // Calculate target offset proportional to distance (closer = bigger offset)
          const factor = (maxMoveDistance - dist) / maxMoveDistance;
          const angle = Math.atan2(dy, dx);
          const targetOffsetX = Math.cos(angle) * factor * 30;
          const targetOffsetY = Math.sin(angle) * factor * 30;

          // Smoothly move offsets toward target
          this.offsetX1 += (targetOffsetX - this.offsetX1) * moveSpeed;
          this.offsetY1 += (targetOffsetY - this.offsetY1) * moveSpeed;
          this.offsetX2 += (targetOffsetX - this.offsetX2) * moveSpeed;
          this.offsetY2 += (targetOffsetY - this.offsetY2) * moveSpeed;
        } else {
          // Return offsets to zero smoothly
          this.offsetX1 += (0 - this.offsetX1) * moveSpeed;
          this.offsetY1 += (0 - this.offsetY1) * moveSpeed;
          this.offsetX2 += (0 - this.offsetX2) * moveSpeed;
          this.offsetY2 += (0 - this.offsetY2) * moveSpeed;
        }
      }
      draw(ctx) {
        ctx.strokeStyle = "rgba(156, 163, 175, 0.3)";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(this.origX1 + this.offsetX1, this.origY1 + this.offsetY1);
        ctx.lineTo(this.origX2 + this.offsetX2, this.origY2 + this.offsetY2);
        ctx.stroke();
      }
    }

    function randomBetween(min, max) {
      return Math.random() * (max - min) + min;
    }

    function generateLines() {
      lines = [];
      for (let i = 0; i < lineCount; i++) {
        const x1 = randomBetween(0, width);
        const y1 = randomBetween(0, height);
        // Random angle and length
        const angle = randomBetween(0, Math.PI * 2);
        const length = randomBetween(40, maxLineLength);
        const x2 = x1 + Math.cos(angle) * length;
        const y2 = y1 + Math.sin(angle) * length;
        lines.push(new Line(x1, y1, x2, y2));
      }
    }
    generateLines();

    let mouseX = width / 2;
    let mouseY = height / 2;

    window.addEventListener("mousemove", (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    function animate() {
      ctx.clearRect(0, 0, width, height);
      lines.forEach((line) => {
        line.update(mouseX, mouseY);
        line.draw(ctx);
      });
      requestAnimationFrame(animate);
    }
    animate();

    // Typing animation logic
    const nameEl = document.getElementById("name");
    const handleEl = document.getElementById("handle");
    const buttonsEl = document.getElementById("buttons");
    const typingCodeEl = document.getElementById("typingCode");

    // Detect browser language and set English or Spanish accordingly
    const userLang = navigator.language || navigator.userLanguage;
    const lang = userLang.startsWith("es") ? "es" : "en";

    const content = {
      en: {
        name: "MINOTBUG",
        handle: "@MinosTbug",
        buttons: [
          { icon: "fas fa-info-circle", text: "Info" },
          { icon: "fas fa-code", text: "Skills" },
          { icon: "fas fa-briefcase", text: "Teams" },
        ],
        codeLines: [
          "$variable = 'PHP';",
          "$variable = 'JavaScript';",
          "$variable = 'Python';",
          "$variable = 'Ruby';",
          "$variable = 'Go';",
          "$variable = 'TypeScript';",
          "$variable = 'C++';",
          "$variable = 'Java';",
        ],
      },
      es: {
        name: "MINOTBUG",
        handle: "@MinosTbug",
        buttons: [
          { icon: "fas fa-info-circle", text: "Info" },
          { icon: "fas fa-code", text: "Habilidades" },
          { icon: "fas fa-briefcase", text: "Equipos" },
        ],
        codeLines: [
          "$variable = 'PHP';",
          "$variable = 'JavaScript';",
          "$variable = 'Python';",
          "$variable = 'Ruby';",
          "$variable = 'Go';",
          "$variable = 'TypeScript';",
          "$variable = 'C++';",
          "$variable = 'Java';",
        ],
      },
    };

    function setLanguage(lang) {
      const data = content[lang];
      nameEl.textContent = data.name;
      handleEl.textContent = data.handle;

      // Clear buttons
      buttonsEl.innerHTML = "";
      data.buttons.forEach((btn) => {
        const button = document.createElement("button");
        button.className =
          "flex items-center gap-2 bg-[#2a3a7a] text-white text-sm font-normal rounded-full px-4 py-2";
        const icon = document.createElement("i");
        icon.className = btn.icon;
        icon.style.fontSize = "0.75rem";
        button.appendChild(icon);
        button.appendChild(document.createTextNode(btn.text));
        buttonsEl.appendChild(button);
      });

      startTypingAnimation(data.codeLines);
    }

    // Initialize language based on browser
    setLanguage(lang);

    // Typing animation variables
    let typingInterval;
    let currentLineIndex = 0;
    let currentCharIndex = 0;
    let isDeleting = false;
    let currentText = "";
    let codeLinesGlobal = [];

    function startTypingAnimation(lines) {
      clearInterval(typingInterval);
      currentLineIndex = 0;
      currentCharIndex = 0;
      isDeleting = false;
      currentText = "";
      codeLinesGlobal = lines;
      typingCodeEl.innerHTML = "";
      type();
    }

    function type() {
      const fullText = codeLinesGlobal[currentLineIndex];
      if (!isDeleting) {
        currentText = fullText.substring(0, currentCharIndex + 1);
        currentCharIndex++;
        typingCodeEl.innerHTML = highlightCode(currentText);
        if (currentCharIndex === fullText.length) {
          isDeleting = true;
          setTimeout(type, 2000);
          return;
        }
      } else {
        currentText = fullText.substring(0, currentCharIndex - 1);
        currentCharIndex--;
        typingCodeEl.innerHTML = highlightCode(currentText);
        if (currentCharIndex === 0) {
          isDeleting = false;
          currentLineIndex = (currentLineIndex + 1) % codeLinesGlobal.length;
          setTimeout(type, 700);
          return;
        }
      }
      setTimeout(type, isDeleting ? 60 : 120);
    }

    function highlightCode(text) {
      const regex = /^(\$variable)(\s*=\s*)('.*?')(;?)$/;
      const match = text.match(regex);
      if (match) {
        return `<span class="typing-variable">${match[1]}</span>${match[2]}<span class="typing-value">${match[3]}</span>${match[4]}`;
      } else {
        return `<span>${text}</span>`;
      }
    }

    // Settings button and panel
    const settingsBtn = document.getElementById("settingsBtn");
    const settingsPanel = document.getElementById("settingsPanel");

    settingsBtn.addEventListener("click", () => {
      settingsPanel.classList.toggle("show");
      if (settingsPanel.classList.contains("show")) {
        settingsPanel.focus();
      }
    });

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && settingsPanel.classList.contains("show")) {
        settingsPanel.classList.remove("show");
        settingsBtn.focus();
      }
    });

    // Theme toggle buttons
    const lightThemeBtn = document.getElementById("lightThemeBtn");
    const darkThemeBtn = document.getElementById("darkThemeBtn");

    function setTheme(theme) {
      if (theme === "dark") {
        document.body.classList.add("dark");
      } else {
        document.body.classList.remove("dark");
      }
      localStorage.setItem("theme", theme);
    }

    lightThemeBtn.addEventListener("click", () => setTheme("light"));
    darkThemeBtn.addEventListener("click", () => setTheme("dark"));

    // Load saved theme or default to light
    const savedTheme = localStorage.getItem("theme") || "light";
    setTheme(savedTheme);

    // Register, Login, Logout placeholders
    document.getElementById("registerBtn").addEventListener("click", () => {
      alert("Register clicked (placeholder)");
    });
    document.getElementById("loginBtn").addEventListener("click", () => {
      alert("Login clicked (placeholder)");
    });
    document.getElementById("logoutBtn").addEventListener("click", () => {
      alert("Log Out clicked (placeholder)");
    });
  </script>
</body>
</html>